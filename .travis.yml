dist: xenial
language: python
sudo: false
cache:
  directories:
    - $HOME/.cache/pip
python:
  - "3.4"
  - "3.5"
  - "3.6"
  - "3.7"
  - "3.8-dev"
  - "pypy3"

install:
  # Ensure modern pip/etc to avoid some issues w/ older worker environs
  - pip install pytest
  - pip install coverage
  - pip install pytest-cov
  - pip install mock
  - pip install codecov # For codecov specifically
  - pip install -e .

script:
  - pytest --cov=wait_for_it_to tests/

env:
  - CODECOV_TOKEN="919258c7-ed4b-463f-973a-68fc7a081d2d"

after_success:
  - codecov

deploy:
  provider: pypi
  user: studioj
  password:
    secure: TSJcVu5oTmqqr9qCrjKNj9Bt1DI/lh3AW+jO3sbVMeDSnixAeQLJwVTpJMj9KvYKhiMv8CkCTEGnlgL8DPPrGQ1rtqL9AsdF73/8dHmT9AKGUMevs0t5nxZIEZPlw81gqr/p6xymo/ph7cuf8exHUNPdURPks6eusc1dHvdttD255IVElP69WoC/n9+2NFTU37m7UidUumB39PgNebipsKIsnnpIZ8HT3x2bQMwUnarwqUIMfO5d6PifMH3Z4hLlj/bYwOyvI0DGYCT/5IOPwtWXMdatoT1JogpRNt1qtTKrW70W6GP9T3G4yNh1AN/CEZeH99oOrwPTpfvvc5ZnY9iTk4w3K7WG0ACBe02eY+3z6QWyBCfzCPoiQY0eb3lDQ+07ZTdJEoYtTWj1j0lU/mR/OfqbdPjfYqB3U48994sgJoN6reZhN4XE7O9ts4WqNd5IAjt6LreXZi8PnQsXBv7Y/Hx8cey2qx0h8Ss0mVjSKGjzIb/d8CQjhClFZcrwQINjRDXJxICNLsxs3KIWJRKTQtT/Uw27FkPzB4iY6cwmHcun6hV9dLmfhXZbkj+KK1pr/sjsOU/T9NVG/4UobhqrYQ1kZ5HzB3pss9pKXG1i55uIo3FEa0W4ywa/+cmmjwhnd180WUlJoe9MbT+DtJ98FFH4AXax8sA9KEsF/As=
  on:
    branch: release

