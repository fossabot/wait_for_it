dist: xenial
language: python
sudo: false
cache:
  directories:
    - $HOME/.cache/pip
python:
  - "3.4"
  - "3.5"
  - "3.6"
  - "3.7"
  - "3.8-dev"
  - "pypy3"

install:
  # Ensure modern pip/etc to avoid some issues w/ older worker environs
  - pip install pytest
  - pip install coverage
  - pip install pytest-cov
  - pip install mock
  - pip install codecov # For codecov specifically
  - pip install -e .

script:
  - pytest --cov=wait_for_it_to tests/

env:
  - CODECOV_TOKEN="919258c7-ed4b-463f-973a-68fc7a081d2d"

after_success:
  - codecov

deploy:
  provider: pypi
  user: studioj
  password:
    secure: K0JIg0v7qz9q08Y3Aiq2VbD/5KF25JKw5KVz35O+NrNvVLC6rbeY7J+g96BtZes2FIH/LNjaGXjNuZPbm4An4XTxD5Dv6Sht97gnNcQwRymjueF+evM1Th+fRl5CSOhdR7UeZ1504pDl4X0PeGk9O3hDhl4ZNH4aVlkRDnwIoSjo0LCUqpPPRxupYjYyAXtu9ifOhdkT891cvJ4dvWP71UuTPpJlP0/hXsPssF34a4b2rKdlGTKqcTHWuUkiq23nw35jD1J+7Tr3e/e/dVP88dbMW6Ai4MrTJbFxjxrtOudAEPYTZAny0i1cMcHc6pm5mwM80y2F2VQHfG+RVT5IRpx3SjmgqtLE9vTL12kf3XkNVDO7Roy5Mad9lAySsbPI7w8fkIE5AmlbV2jra+749CqIhAAFZW4HF0Gh3XsTuRz0mPKKiMt/HjzYOkbKKFSL8VgYdwz8CSJhQVQyx24f4XwrSkn5bidzm+S2qymFf5+JsxnfMI7/+63G/asRlmjGN7LoJAIqFAKhsXDKHSD+CaFQjXgX4nodiTEyaWlGjsElWjfonMXuvHYejUboc3qgXKde7y6M1cFoSs9DxI0828z3s6AtAWYCWLDDHBB1fl5gXdW2FQOYeEsUr/iY1l46e0J99sXBiJ6QpKqfHHT5zEAJJVfIM4BZ8ZNnjkCTJDM=
  on:
    branch: release

